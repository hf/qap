Language Specification
======================

A language for representing arbitrary QAPs follows below:

## Definitions

### Assignments

"Variables" are called "assignments" in QAPs. Assignments are values from a 
(large) finite field that may or may not satisfy the QAP.

An assignment can be either given as arguments to a gate definiton, or on 
the left-hand side of the `=` sign.

### Inputs

Inputs are special types of assignments that receive their values from 
outside the QAP, i.e. they are given to the QAP from the outside.

Assignments that are inputs are specified as: `assignment = input`.

`input` is a keyword and can not be used as the name of an assignment.

### Outputs

Outputs are another type of assignment, one that is generated by computation
in the QAP. Outputs can be found on the right-hand side of a gate 
invocation.

### Gates

Gates are the functional unit of a QAP. A gate is essentially a multiplicative
subcircuit: 

Given a gate with inputs `a1`, ..., `an` we map field values `c0`, ..., `cn` and
`d0`, ..., `dn` s.t. 

`(c0 + c1 * a1 + ... + cn * an) * (d0 + d1 * a1 + ... + dn * an)`

This is expressed as:

`gate name(a1, a2): (c0 + c1 * a1 + c2 * a2) * (d0 + d1 * a1 + d2 * a2)`

The `cn` and `dn` are constants from a finite field. If a constant is `1` the 
multiplication `1 * x` may be dropped to `x`. If a constant is `0` the 
multiplication `0 * x` may not be specified. 

In the strict sense of QAPs, a gate is not a QAP. It is a "parital" QAP in that
it does not contain polynomial sets `V, W, Y`, but rather it is a "mapping" 
that allows an assignment of the form:

`output = gate_name(input1, input2)`

to be expressed as a QAP over the assignments `input1, input2, output` with the
corresponding constant values.

The above segment will be reffered to as an **invocation** of a gate to an 
assignment.

By assigning outputs of some gate invocations as inputs to others, we invoke
the recursive QAP composition algorithm.

It is important to note that the number of inputs to a gate may range from
`0` to an arbitrary size. This will be reffered to as the gate's **arity**.

A gate with arity `0` is useful for expressing output constants, such as:

`gate const1(): 1 * 1`

These constants may be used to control the sparseness of the QAP polynomial
sets.

## Examples

```
# these are inputs to the QAP
a = input;
b = input;
c = input;

# a multiplicative gate definition
gate add2(a, b): (0 + 1 * a + 1 * b) * (1);

# outputs
p = add2(a, b);
q = add2(c, p);
```
